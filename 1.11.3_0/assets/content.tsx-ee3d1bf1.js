import{j as U,a as T,B as In,r as l,_ as Fe,b as Hn,c as Pn,i as x,o as G,w as W,l as xn,F as rn,d as ct,H as Mn,e as lt,f as Nn,g as kn,R as jn,C as Rn}from"./logo-ac8119b5.js";import{c as he,g as an,r as E,s as j,f as Dn,a as Bn,C as re,b as ae,d as oe,i as ut,D as Wn,N as Fn,E as Ue}from"./const-4e5411b4.js";const Un="https://api.notion.com/v1/oauth/authorize?owner=user&client_id=1be66fdf-7bbb-4b4b-ab2f-594a7ae8b108&redirect_uri=http://localhost:3000/api/accesscode&response_type=code";function Gn(){return U("div",{className:"p-8",children:[T("div",{className:"text-xl\r font-bold my-4",children:"Empower Your Notion ✨ 123"}),T(In,{mt:4,colorScheme:"teal",onClick:()=>{const t=window.open("","","width=500,height=500"),n=`<iframe src="${Un}" width="100%" height="100%"></iframe>`;t==null||t.document.write(n)},children:"Connet Notion Power"})]})}var ie=function(e){return typeof e=="function"},zn=function(e){return typeof e=="string"},Ze=function(e){return typeof e=="number"},Kn=!1;const Qe=Kn;function Jn(e){Qe&&ie(e);var t=l.useRef(e);t.current=l.useMemo(function(){return e},[e]);var n=l.useRef();return n.current||(n.current=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.current.apply(this,r)}),n.current}function ft(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function Ce(e){var t=l.useRef(e);return t.current=e,t}var Xn=function(e){Qe&&ie(e);var t=Ce(e);l.useEffect(function(){return function(){t.current()}},[])};const on=Xn;function Yn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var se=Yn,Vn=typeof he=="object"&&he&&he.Object===Object&&he,sn=Vn,Zn=sn,Qn=typeof self=="object"&&self&&self.Object===Object&&self,qn=Zn||Qn||Function("return this")(),D=qn,er=D,tr=function(){return er.Date.now()},nr=tr,rr=/\s/;function ar(e){for(var t=e.length;t--&&rr.test(e.charAt(t)););return t}var or=ar,ir=or,sr=/^\s+/;function cr(e){return e&&e.slice(0,ir(e)+1).replace(sr,"")}var lr=cr,ur=D,fr=ur.Symbol,qe=fr,dt=qe,cn=Object.prototype,dr=cn.hasOwnProperty,hr=cn.toString,ee=dt?dt.toStringTag:void 0;function vr(e){var t=dr.call(e,ee),n=e[ee];try{e[ee]=void 0;var r=!0}catch{}var a=hr.call(e);return r&&(t?e[ee]=n:delete e[ee]),a}var gr=vr,pr=Object.prototype,mr=pr.toString;function yr(e){return mr.call(e)}var br=yr,ht=qe,_r=gr,Sr=br,$r="[object Null]",Er="[object Undefined]",vt=ht?ht.toStringTag:void 0;function Cr(e){return e==null?e===void 0?Er:$r:vt&&vt in Object(e)?_r(e):Sr(e)}var ce=Cr;function wr(e){return e!=null&&typeof e=="object"}var le=wr,Tr=ce,Or=le,Ar="[object Symbol]";function Lr(e){return typeof e=="symbol"||Or(e)&&Tr(e)==Ar}var Ir=Lr,Hr=lr,gt=se,Pr=Ir,pt=0/0,xr=/^[-+]0x[0-9a-f]+$/i,Mr=/^0b[01]+$/i,Nr=/^0o[0-7]+$/i,kr=parseInt;function jr(e){if(typeof e=="number")return e;if(Pr(e))return pt;if(gt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=gt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Hr(e);var n=Mr.test(e);return n||Nr.test(e)?kr(e.slice(2),n?2:8):xr.test(e)?pt:+e}var Rr=jr,Dr=se,Ne=nr,mt=Rr,Br="Expected a function",Wr=Math.max,Fr=Math.min;function Ur(e,t,n){var r,a,o,i,s,u,f=0,v=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Br);t=mt(t)||0,Dr(n)&&(v=!!n.leading,d="maxWait"in n,o=d?Wr(mt(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h);function S(p){var w=r,O=a;return r=a=void 0,f=p,i=e.apply(O,w),i}function m(p){return f=p,s=setTimeout(_,t),v?S(p):i}function y(p){var w=p-u,O=p-f,A=t-w;return d?Fr(A,o-O):A}function g(p){var w=p-u,O=p-f;return u===void 0||w>=t||w<0||d&&O>=o}function _(){var p=Ne();if(g(p))return C(p);s=setTimeout(_,y(p))}function C(p){return s=void 0,h&&r?S(p):(r=a=void 0,i)}function I(){s!==void 0&&clearTimeout(s),f=0,r=u=a=s=void 0}function M(){return s===void 0?i:C(Ne())}function $(){var p=Ne(),w=g(p);if(r=arguments,a=this,u=p,w){if(s===void 0)return m(u);if(d)return clearTimeout(s),s=setTimeout(_,t),S(u)}return s===void 0&&(s=setTimeout(_,t)),i}return $.cancel=I,$.flush=M,$}var Gr=Ur,zr=!!(typeof window<"u"&&window.document&&window.document.createElement);const Kr=zr;var Jr=Gr,Xr=se,Yr="Expected a function";function Vr(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Yr);return Xr(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Jr(e,t,{leading:r,maxWait:t,trailing:a})}var Zr=Vr;const Qr=an(Zr);function ln(e,t){if(Kr){if(!e)return t;var n;return ie(e)?n=e():"current"in e?n=e.current:n=e,n}}var qr=function(e){var t=function(n,r,a){var o=l.useRef(!1),i=l.useRef([]),s=l.useRef([]),u=l.useRef();e(function(){var f,v=Array.isArray(a)?a:[a],d=v.map(function(h){return ln(h)});if(!o.current){o.current=!0,i.current=d,s.current=r,u.current=n();return}(d.length!==i.current.length||!ft(d,i.current)||!ft(r,s.current))&&((f=u.current)===null||f===void 0||f.call(u),i.current=d,s.current=r,u.current=n())}),on(function(){var f;(f=u.current)===null||f===void 0||f.call(u),o.current=!1})};return t};const ea=qr;var ta=ea(l.useEffect);const na=ta;function ra(){this.__data__=[],this.size=0}var aa=ra;function oa(e,t){return e===t||e!==e&&t!==t}var un=oa,ia=un;function sa(e,t){for(var n=e.length;n--;)if(ia(e[n][0],t))return n;return-1}var Ae=sa,ca=Ae,la=Array.prototype,ua=la.splice;function fa(e){var t=this.__data__,n=ca(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ua.call(t,n,1),--this.size,!0}var da=fa,ha=Ae;function va(e){var t=this.__data__,n=ha(t,e);return n<0?void 0:t[n][1]}var ga=va,pa=Ae;function ma(e){return pa(this.__data__,e)>-1}var ya=ma,ba=Ae;function _a(e,t){var n=this.__data__,r=ba(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Sa=_a,$a=aa,Ea=da,Ca=ga,wa=ya,Ta=Sa;function J(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}J.prototype.clear=$a;J.prototype.delete=Ea;J.prototype.get=Ca;J.prototype.has=wa;J.prototype.set=Ta;var Le=J,Oa=Le;function Aa(){this.__data__=new Oa,this.size=0}var La=Aa;function Ia(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Ha=Ia;function Pa(e){return this.__data__.get(e)}var xa=Pa;function Ma(e){return this.__data__.has(e)}var Na=Ma,ka=ce,ja=se,Ra="[object AsyncFunction]",Da="[object Function]",Ba="[object GeneratorFunction]",Wa="[object Proxy]";function Fa(e){if(!ja(e))return!1;var t=ka(e);return t==Da||t==Ba||t==Ra||t==Wa}var fn=Fa,Ua=D,Ga=Ua["__core-js_shared__"],za=Ga,ke=za,yt=function(){var e=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ka(e){return!!yt&&yt in e}var Ja=Ka,Xa=Function.prototype,Ya=Xa.toString;function Va(e){if(e!=null){try{return Ya.call(e)}catch{}try{return e+""}catch{}}return""}var dn=Va,Za=fn,Qa=Ja,qa=se,eo=dn,to=/[\\^$.*+?()[\]{}|]/g,no=/^\[object .+?Constructor\]$/,ro=Function.prototype,ao=Object.prototype,oo=ro.toString,io=ao.hasOwnProperty,so=RegExp("^"+oo.call(io).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function co(e){if(!qa(e)||Qa(e))return!1;var t=Za(e)?so:no;return t.test(eo(e))}var lo=co;function uo(e,t){return e==null?void 0:e[t]}var fo=uo,ho=lo,vo=fo;function go(e,t){var n=vo(e,t);return ho(n)?n:void 0}var X=go,po=X,mo=D,yo=po(mo,"Map"),et=yo,bo=X,_o=bo(Object,"create"),Ie=_o,bt=Ie;function So(){this.__data__=bt?bt(null):{},this.size=0}var $o=So;function Eo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Co=Eo,wo=Ie,To="__lodash_hash_undefined__",Oo=Object.prototype,Ao=Oo.hasOwnProperty;function Lo(e){var t=this.__data__;if(wo){var n=t[e];return n===To?void 0:n}return Ao.call(t,e)?t[e]:void 0}var Io=Lo,Ho=Ie,Po=Object.prototype,xo=Po.hasOwnProperty;function Mo(e){var t=this.__data__;return Ho?t[e]!==void 0:xo.call(t,e)}var No=Mo,ko=Ie,jo="__lodash_hash_undefined__";function Ro(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ko&&t===void 0?jo:t,this}var Do=Ro,Bo=$o,Wo=Co,Fo=Io,Uo=No,Go=Do;function Y(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Y.prototype.clear=Bo;Y.prototype.delete=Wo;Y.prototype.get=Fo;Y.prototype.has=Uo;Y.prototype.set=Go;var zo=Y,_t=zo,Ko=Le,Jo=et;function Xo(){this.size=0,this.__data__={hash:new _t,map:new(Jo||Ko),string:new _t}}var Yo=Xo;function Vo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Zo=Vo,Qo=Zo;function qo(e,t){var n=e.__data__;return Qo(t)?n[typeof t=="string"?"string":"hash"]:n.map}var He=qo,ei=He;function ti(e){var t=ei(this,e).delete(e);return this.size-=t?1:0,t}var ni=ti,ri=He;function ai(e){return ri(this,e).get(e)}var oi=ai,ii=He;function si(e){return ii(this,e).has(e)}var ci=si,li=He;function ui(e,t){var n=li(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var fi=ui,di=Yo,hi=ni,vi=oi,gi=ci,pi=fi;function V(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}V.prototype.clear=di;V.prototype.delete=hi;V.prototype.get=vi;V.prototype.has=gi;V.prototype.set=pi;var hn=V,mi=Le,yi=et,bi=hn,_i=200;function Si(e,t){var n=this.__data__;if(n instanceof mi){var r=n.__data__;if(!yi||r.length<_i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bi(r)}return n.set(e,t),this.size=n.size,this}var $i=Si,Ei=Le,Ci=La,wi=Ha,Ti=xa,Oi=Na,Ai=$i;function Z(e){var t=this.__data__=new Ei(e);this.size=t.size}Z.prototype.clear=Ci;Z.prototype.delete=wi;Z.prototype.get=Ti;Z.prototype.has=Oi;Z.prototype.set=Ai;var Li=Z,Ii="__lodash_hash_undefined__";function Hi(e){return this.__data__.set(e,Ii),this}var Pi=Hi;function xi(e){return this.__data__.has(e)}var Mi=xi,Ni=hn,ki=Pi,ji=Mi;function we(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ni;++t<n;)this.add(e[t])}we.prototype.add=we.prototype.push=ki;we.prototype.has=ji;var Ri=we;function Di(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bi=Di;function Wi(e,t){return e.has(t)}var Fi=Wi,Ui=Ri,Gi=Bi,zi=Fi,Ki=1,Ji=2;function Xi(e,t,n,r,a,o){var i=n&Ki,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var f=o.get(e),v=o.get(t);if(f&&v)return f==t&&v==e;var d=-1,h=!0,S=n&Ji?new Ui:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var m=e[d],y=t[d];if(r)var g=i?r(y,m,d,t,e,o):r(m,y,d,e,t,o);if(g!==void 0){if(g)continue;h=!1;break}if(S){if(!Gi(t,function(_,C){if(!zi(S,C)&&(m===_||a(m,_,n,r,o)))return S.push(C)})){h=!1;break}}else if(!(m===y||a(m,y,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var vn=Xi,Yi=D,Vi=Yi.Uint8Array,Zi=Vi;function Qi(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var qi=Qi;function es(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var ts=es,St=qe,$t=Zi,ns=un,rs=vn,as=qi,os=ts,is=1,ss=2,cs="[object Boolean]",ls="[object Date]",us="[object Error]",fs="[object Map]",ds="[object Number]",hs="[object RegExp]",vs="[object Set]",gs="[object String]",ps="[object Symbol]",ms="[object ArrayBuffer]",ys="[object DataView]",Et=St?St.prototype:void 0,je=Et?Et.valueOf:void 0;function bs(e,t,n,r,a,o,i){switch(n){case ys:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ms:return!(e.byteLength!=t.byteLength||!o(new $t(e),new $t(t)));case cs:case ls:case ds:return ns(+e,+t);case us:return e.name==t.name&&e.message==t.message;case hs:case gs:return e==t+"";case fs:var s=as;case vs:var u=r&is;if(s||(s=os),e.size!=t.size&&!u)return!1;var f=i.get(e);if(f)return f==t;r|=ss,i.set(e,t);var v=rs(s(e),s(t),r,a,o,i);return i.delete(e),v;case ps:if(je)return je.call(e)==je.call(t)}return!1}var _s=bs;function Ss(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var $s=Ss,Es=Array.isArray,tt=Es,Cs=$s,ws=tt;function Ts(e,t,n){var r=t(e);return ws(e)?r:Cs(r,n(e))}var Os=Ts;function As(e,t){for(var n=-1,r=e==null?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}var Ls=As;function Is(){return[]}var Hs=Is,Ps=Ls,xs=Hs,Ms=Object.prototype,Ns=Ms.propertyIsEnumerable,Ct=Object.getOwnPropertySymbols,ks=Ct?function(e){return e==null?[]:(e=Object(e),Ps(Ct(e),function(t){return Ns.call(e,t)}))}:xs,js=ks;function Rs(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ds=Rs,Bs=ce,Ws=le,Fs="[object Arguments]";function Us(e){return Ws(e)&&Bs(e)==Fs}var Gs=Us,wt=Gs,zs=le,gn=Object.prototype,Ks=gn.hasOwnProperty,Js=gn.propertyIsEnumerable,Xs=wt(function(){return arguments}())?wt:function(e){return zs(e)&&Ks.call(e,"callee")&&!Js.call(e,"callee")},Ys=Xs,Te={exports:{}};function Vs(){return!1}var Zs=Vs;Te.exports;(function(e,t){var n=D,r=Zs,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===a,s=i?n.Buffer:void 0,u=s?s.isBuffer:void 0,f=u||r;e.exports=f})(Te,Te.exports);var pn=Te.exports,Qs=9007199254740991,qs=/^(?:0|[1-9]\d*)$/;function ec(e,t){var n=typeof e;return t=t??Qs,!!t&&(n=="number"||n!="symbol"&&qs.test(e))&&e>-1&&e%1==0&&e<t}var tc=ec,nc=9007199254740991;function rc(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nc}var mn=rc,ac=ce,oc=mn,ic=le,sc="[object Arguments]",cc="[object Array]",lc="[object Boolean]",uc="[object Date]",fc="[object Error]",dc="[object Function]",hc="[object Map]",vc="[object Number]",gc="[object Object]",pc="[object RegExp]",mc="[object Set]",yc="[object String]",bc="[object WeakMap]",_c="[object ArrayBuffer]",Sc="[object DataView]",$c="[object Float32Array]",Ec="[object Float64Array]",Cc="[object Int8Array]",wc="[object Int16Array]",Tc="[object Int32Array]",Oc="[object Uint8Array]",Ac="[object Uint8ClampedArray]",Lc="[object Uint16Array]",Ic="[object Uint32Array]",b={};b[$c]=b[Ec]=b[Cc]=b[wc]=b[Tc]=b[Oc]=b[Ac]=b[Lc]=b[Ic]=!0;b[sc]=b[cc]=b[_c]=b[lc]=b[Sc]=b[uc]=b[fc]=b[dc]=b[hc]=b[vc]=b[gc]=b[pc]=b[mc]=b[yc]=b[bc]=!1;function Hc(e){return ic(e)&&oc(e.length)&&!!b[ac(e)]}var Pc=Hc;function xc(e){return function(t){return e(t)}}var Mc=xc,Oe={exports:{}};Oe.exports;(function(e,t){var n=sn,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===r,i=o&&n.process,s=function(){try{var u=a&&a.require&&a.require("util").types;return u||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s})(Oe,Oe.exports);var Nc=Oe.exports,kc=Pc,jc=Mc,Tt=Nc,Ot=Tt&&Tt.isTypedArray,Rc=Ot?jc(Ot):kc,yn=Rc,Dc=Ds,Bc=Ys,Wc=tt,Fc=pn,Uc=tc,Gc=yn,zc=Object.prototype,Kc=zc.hasOwnProperty;function Jc(e,t){var n=Wc(e),r=!n&&Bc(e),a=!n&&!r&&Fc(e),o=!n&&!r&&!a&&Gc(e),i=n||r||a||o,s=i?Dc(e.length,String):[],u=s.length;for(var f in e)(t||Kc.call(e,f))&&!(i&&(f=="length"||a&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Uc(f,u)))&&s.push(f);return s}var Xc=Jc,Yc=Object.prototype;function Vc(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yc;return e===n}var Zc=Vc;function Qc(e,t){return function(n){return e(t(n))}}var qc=Qc,el=qc,tl=el(Object.keys,Object),nl=tl,rl=Zc,al=nl,ol=Object.prototype,il=ol.hasOwnProperty;function sl(e){if(!rl(e))return al(e);var t=[];for(var n in Object(e))il.call(e,n)&&n!="constructor"&&t.push(n);return t}var cl=sl,ll=fn,ul=mn;function fl(e){return e!=null&&ul(e.length)&&!ll(e)}var dl=fl,hl=Xc,vl=cl,gl=dl;function pl(e){return gl(e)?hl(e):vl(e)}var ml=pl,yl=Os,bl=js,_l=ml;function Sl(e){return yl(e,_l,bl)}var $l=Sl,At=$l,El=1,Cl=Object.prototype,wl=Cl.hasOwnProperty;function Tl(e,t,n,r,a,o){var i=n&El,s=At(e),u=s.length,f=At(t),v=f.length;if(u!=v&&!i)return!1;for(var d=u;d--;){var h=s[d];if(!(i?h in t:wl.call(t,h)))return!1}var S=o.get(e),m=o.get(t);if(S&&m)return S==t&&m==e;var y=!0;o.set(e,t),o.set(t,e);for(var g=i;++d<u;){h=s[d];var _=e[h],C=t[h];if(r)var I=i?r(C,_,h,t,e,o):r(_,C,h,e,t,o);if(!(I===void 0?_===C||a(_,C,n,r,o):I)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var M=e.constructor,$=t.constructor;M!=$&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof $=="function"&&$ instanceof $)&&(y=!1)}return o.delete(e),o.delete(t),y}var Ol=Tl,Al=X,Ll=D,Il=Al(Ll,"DataView"),Hl=Il,Pl=X,xl=D,Ml=Pl(xl,"Promise"),Nl=Ml,kl=X,jl=D,Rl=kl(jl,"Set"),Dl=Rl,Bl=X,Wl=D,Fl=Bl(Wl,"WeakMap"),Ul=Fl,Ge=Hl,ze=et,Ke=Nl,Je=Dl,Xe=Ul,bn=ce,Q=dn,Lt="[object Map]",Gl="[object Object]",It="[object Promise]",Ht="[object Set]",Pt="[object WeakMap]",xt="[object DataView]",zl=Q(Ge),Kl=Q(ze),Jl=Q(Ke),Xl=Q(Je),Yl=Q(Xe),F=bn;(Ge&&F(new Ge(new ArrayBuffer(1)))!=xt||ze&&F(new ze)!=Lt||Ke&&F(Ke.resolve())!=It||Je&&F(new Je)!=Ht||Xe&&F(new Xe)!=Pt)&&(F=function(e){var t=bn(e),n=t==Gl?e.constructor:void 0,r=n?Q(n):"";if(r)switch(r){case zl:return xt;case Kl:return Lt;case Jl:return It;case Xl:return Ht;case Yl:return Pt}return t});var Vl=F,Re=Li,Zl=vn,Ql=_s,ql=Ol,Mt=Vl,Nt=tt,kt=pn,eu=yn,tu=1,jt="[object Arguments]",Rt="[object Array]",ve="[object Object]",nu=Object.prototype,Dt=nu.hasOwnProperty;function ru(e,t,n,r,a,o){var i=Nt(e),s=Nt(t),u=i?Rt:Mt(e),f=s?Rt:Mt(t);u=u==jt?ve:u,f=f==jt?ve:f;var v=u==ve,d=f==ve,h=u==f;if(h&&kt(e)){if(!kt(t))return!1;i=!0,v=!1}if(h&&!v)return o||(o=new Re),i||eu(e)?Zl(e,t,n,r,a,o):Ql(e,t,u,n,r,a,o);if(!(n&tu)){var S=v&&Dt.call(e,"__wrapped__"),m=d&&Dt.call(t,"__wrapped__");if(S||m){var y=S?e.value():e,g=m?t.value():t;return o||(o=new Re),a(y,g,n,r,o)}}return h?(o||(o=new Re),ql(e,t,n,r,a,o)):!1}var au=ru,ou=au,Bt=le;function _n(e,t,n,r,a){return e===t?!0:e==null||t==null||!Bt(e)&&!Bt(t)?e!==e&&t!==t:ou(e,t,n,r,_n,a)}var iu=_n,su=iu;function cu(e,t){return su(e,t)}var lu=cu;const uu=an(lu);var fu=function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),uu(e,t)},du=function(e,t,n){n===void 0&&(n={});var r=Jn(e),a=l.useRef(null),o=l.useCallback(function(){a.current&&clearInterval(a.current)},[]);return l.useEffect(function(){if(!(!Ze(t)||t<0))return n.immediate&&r(),a.current=setInterval(r,t),o},[t,n.immediate]),o};const hu=du;var vu=function(e,t,n){var r=l.useRef(),a=l.useRef(0);fu(t,r.current)||(r.current=t,a.current+=1),na(e,[a.current],n)};const gu=vu;var pu=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?navigator==null?void 0:navigator.platform:"");const mu=pu;var Sn={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:mu?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Ye={ctrl:function(e){return e.ctrlKey},shift:function(e){return e.shiftKey},alt:function(e){return e.altKey},meta:function(e){return e.type==="keyup"?Sn.meta.includes(e.keyCode):e.metaKey}};function $n(e){return zn(e)||Ze(e)}function yu(e){var t=Object.keys(Ye).reduce(function(n,r){return Ye[r](e)?n+1:n},0);return[16,17,18,91,92].includes(e.keyCode)?t:t+1}function Wt(e,t,n){var r,a;if(!e.key)return!1;if(Ze(t))return e.keyCode===t?t:!1;var o=t.split("."),i=0;try{for(var s=Fe(o),u=s.next();!u.done;u=s.next()){var f=u.value,v=Ye[f],d=Sn[f.toLowerCase()];(v&&v(e)||d&&d===e.keyCode)&&i++}}catch(h){r={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return n?i===o.length&&yu(e)===o.length?t:!1:i===o.length?t:!1}function bu(e,t){return ie(e)?e:$n(e)?function(n){return Wt(n,e,t)}:Array.isArray(e)?function(n){return e.find(function(r){return Wt(n,r,t)})}:function(){return!!e}}var _u=["keydown"];function Su(e,t,n){var r=n||{},a=r.events,o=a===void 0?_u:a,i=r.target,s=r.exactMatch,u=s===void 0?!1:s,f=r.useCapture,v=f===void 0?!1:f,d=Ce(t),h=Ce(e);gu(function(){var S,m,y,g=ln(i,window);if(g){var _=function($){var p,w=bu(h.current,u),O=w($),A=$n(O)?O:$.key;if(O)return(p=d.current)===null||p===void 0?void 0:p.call(d,$,A)};try{for(var C=Fe(o),I=C.next();!I.done;I=C.next()){var M=I.value;(y=g==null?void 0:g.addEventListener)===null||y===void 0||y.call(g,M,_,v)}}catch($){S={error:$}}finally{try{I&&!I.done&&(m=C.return)&&m.call(C)}finally{if(S)throw S.error}}return function(){var $,p,w;try{for(var O=Fe(o),A=O.next();!A.done;A=O.next()){var z=A.value;(w=g==null?void 0:g.removeEventListener)===null||w===void 0||w.call(g,z,_,v)}}catch(q){$={error:q}}finally{try{A&&!A.done&&(p=O.return)&&p.call(O)}finally{if($)throw $.error}}}}},[o],i)}function Ft(e,t){var n;Qe&&ie(e);var r=Ce(e),a=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,o=l.useMemo(function(){return Qr(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return r.current.apply(r,Hn([],Pn(i),!1))},a,t)},[]);return on(function(){o.cancel()}),{run:o,cancel:o.cancel,flush:o.flush}}const ge=e=>{const t=document.querySelector(".notion-help-button");t&&(e?t.classList.add("hidden"):t.classList.remove("hidden"))};function $u(){const[e,t]=l.useState(!1);return l.useEffect(()=>{E(["isHideHelpButton"]).then(n=>{(n==null?void 0:n.isHideHelpButton)===!0?ge(!0):(n==null?void 0:n.isHideHelpButton)===!1&&ge(!1)})},[e]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(n,r,a){(n==null?void 0:n.isHideHelpButton)===!0?ge(!0):(n==null?void 0:n.isHideHelpButton)===!1&&ge(!1),a("Have received your message from content script："+JSON.stringify(n))})},[]),{triggerUseHideHelpButton:()=>t(!e)}}let R;async function Eu(){const e=await E(["isDarkMode"]),n=!((e==null?void 0:e.isDarkMode)||!1),r=document.querySelector(".notion-topbar");r&&(R=null,n&&(R=new MutationObserver(a=>{a.forEach(o=>{o.attributeName==="style"&&parseFloat(r.style.opacity)===0&&(r.style.opacity="1")})}),R.observe(r,{attributes:!0,attributeFilter:["style"]})))}const $e=async()=>{const e=await E(["isDarkMode"]),t=(e==null?void 0:e.isDarkMode)||!1,n=await E(["backgroundColor"]);if(!n)return;let r=n.backgroundColor||"#fff";r==="reset"&&(r="#fff"),t&&(r="#191919"),document.querySelector(":root").style.setProperty("--notion-power-background-color",r);const o=document.querySelector(".notion-topbar");o&&(o.style.backgroundColor=r,R&&(R==null||R.disconnect()),Eu())};function Cu(){const[e,t]=l.useState(document.body.className.includes("dark"));return l.useEffect(()=>{const n=o=>{for(const i of o)i.type==="attributes"&&i.attributeName==="class"&&(document.body.className.includes("dark")?(j({isDarkMode:!0}),R==null||R.disconnect(),$e()):(j({isDarkMode:!1}),$e()))},r=new MutationObserver(n),a={attributes:!0,attributeFilter:["class"]};r.observe(document.body,a),chrome.runtime.onMessage.addListener(function(o,i,s){o.backgroundColor&&(j({backgroundColor:o.backgroundColor}),$e()),s("Have received your message from content script："+JSON.stringify(o))})},[]),l.useEffect(()=>{e?j({isDarkMode:!0}):j({isDarkMode:!1})},[e]),{isDarkMode:e}}const pe=e=>{const t=document.querySelector(".notion-topbar .shadow-cursor-breadcrumb");t&&(e?t.classList.add("hidden"):t.classList.remove("hidden"))};function wu(){const[e,t]=l.useState(!1);return l.useEffect(()=>{E(["isHideBreadCrumb"]).then(n=>{(n==null?void 0:n.isHideBreadCrumb)===!0?pe(!0):(n==null?void 0:n.isHideBreadCrumb)===!1&&pe(!1)})},[e]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(n,r,a){(n==null?void 0:n.isHideBreadCrumb)===!0?pe(!0):(n==null?void 0:n.isHideBreadCrumb)===!1&&pe(!1),a("Have received your message from content script："+JSON.stringify(n))})},[]),{triggerUseHideBreadCrumbs:()=>t(!e)}}const me=e=>{const t=document.querySelectorAll(".notion-frame .notion-page-details-controls > div");Array.from(t).forEach(n=>{var r;(r=n.textContent)!=null&&r.includes("backlink")&&(e?n.classList.add("hidden"):n.classList.remove("hidden"))})};function Tu(){const[e,t]=l.useState(!1);return l.useEffect(()=>{E(["isHideBacklinks"]).then(n=>{(n==null?void 0:n.isHideBacklinks)===!0?me(!0):(n==null?void 0:n.isHideBacklinks)===!1&&me(!1)})},[e]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(n,r,a){(n==null?void 0:n.isHideBacklinks)===!0?me(!0):(n==null?void 0:n.isHideBacklinks)===!1&&me(!1),a("Have received your message from content script："+JSON.stringify(n))})},[]),{triggerUseHideBackLinks:()=>t(!e)}}const Ou=()=>{var t;let e=document.querySelector(".notion-cursor-listener .notion-sidebar .calendarDate20");e||(e=document.querySelector(".notion-cursor-listener .notion-sidebar .typesRelation")),(t=e==null?void 0:e.parentElement)==null||t.click()};function Au(){const[e,t]=l.useState(!0);l.useEffect(()=>{E(["isEnableCalendarShortcut"]).then(n=>{t((n==null?void 0:n.isEnableCalendarShortcut)||!1)})},[]),Su("ctrl.alt.p",()=>{e&&Ou()}),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(n,r,a){(n==null?void 0:n.isEnableCalendarShortcut)===!0?t(!0):(n==null?void 0:n.isEnableCalendarShortcut)===!1&&t(!1),a("Have received your message from content script："+JSON.stringify(n))})},[])}const ye=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("hide-page-properties"):t.classList.remove("hide-page-properties"))};function Lu(){l.useEffect(()=>{E(["isHidePageProperites"]).then(e=>{(e==null?void 0:e.isHidePageProperites)===!0?ye(!0):(e==null?void 0:e.isHidePageProperites)===!1&&ye(!1)})},[]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(e,t,n){(e==null?void 0:e.isHidePageProperites)===!0?ye(!0):(e==null?void 0:e.isHidePageProperites)===!1&&ye(!1),n("Have received your message from content script："+JSON.stringify(e))})},[])}const be=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("hide-horizontal-scroll-bar"):t.classList.remove("hide-horizontal-scroll-bar"))};function Iu(){l.useEffect(()=>{E(["isHideHorizontalScrollBar"]).then(e=>{(e==null?void 0:e.isHideHorizontalScrollBar)===!0?be(!0):(e==null?void 0:e.isHideHorizontalScrollBar)===!1&&be(!1)})},[]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(e,t,n){(e==null?void 0:e.isHideHorizontalScrollBar)===!0?be(!0):(e==null?void 0:e.isHideHorizontalScrollBar)===!1&&be(!1),n("Have received your message from content script："+JSON.stringify(e))})},[])}const Ut=(e,t)=>{var o;const n=`
      .notion-frame h1, .notion-frame h2, .notion-frame h3 {
          font-family: ${e} !important;
      }
      .notion-peek-renderer h1, .notion-peek-renderer h2, .notion-peek-renderer h3  {
        font-family: ${e};
      }
      .notion-body {
        font-family: ${e} !important;
      }
  `,r=document.createElement("style");r.textContent=n,r.id="FONT_FAMILY_STYLE_ID";const a=document.getElementById("FONT_FAMILY_STYLE_ID");a&&((o=a.parentNode)==null||o.removeChild(a)),t||document.head.appendChild(r)},En=async()=>{const e=document.querySelector("#notion-app .notion-app-inner");if(e){const t=await E(["fontfamilay"]),n=t==null?void 0:t.fontfamilay;if(n)if(n==="reset"){j({fontfamilay:""});const r=await E(["fontfamilyOld"]);if(!r)return;e.style.fontFamily=r.fontfamilyOld||"",Ut(n,!0)}else e.style.fontFamily=n,Ut(n)}},Hu=async()=>{const e=await E(["fontSize"]),t=e==null?void 0:e.fontSize,n=Dn[t],r=Bn[t],a=document.querySelector(":root");a.style.setProperty("--notion-power-font-size-text",n),a.style.setProperty("--notion-power-font-size-lg-text",r)};function Pu(){l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(e,t,n){e.fontfamilay&&En(),e.fontSize&&Hu(),n("Have received your message from content script："+JSON.stringify(e))})},[])}const Gt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("enable-image-border"):t.classList.remove("enable-image-border"))};function xu(){l.useEffect(()=>{E(["isEnableImageBorder"]).then(e=>{x(e==null?void 0:e.isEnableImageBorder)&&Gt(e==null?void 0:e.isEnableImageBorder)})},[]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(e,t,n){x(e==null?void 0:e.isEnableImageBorder)&&Gt(e==null?void 0:e.isEnableImageBorder)})},[])}const zt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("enable-header-center"):t.classList.remove("enable-header-center"))};function Mu(){l.useEffect(()=>{E(["isEnableHeaderCenter"]).then(e=>{x(e==null?void 0:e.isEnableHeaderCenter)&&zt(e==null?void 0:e.isEnableHeaderCenter)})},[]),l.useEffect(()=>{chrome.runtime.onMessage.addListener(function(e,t,n){x(e==null?void 0:e.isEnableHeaderCenter)&&zt(e==null?void 0:e.isEnableHeaderCenter)})},[])}function Cn(e){const t=l.useRef("");l.useEffect(()=>{typeof e=="function"&&e()},[]),hu(()=>{t.current!==window.location.href&&(t.current=window.location.href,e())},300)}const De=async e=>{const t=document.querySelector(".notion-body"),n=document.querySelector(".layout");if(n!=null&&n.classList.contains("layout-wide")){t==null||t.classList.remove("page-width-md");return}t&&(e?t.classList.add("page-width-md"):t.classList.remove("page-width-md"))};let te;function Nu(){const[e,t]=l.useState(!1),n=()=>{W(".notion-frame .layout").then(()=>{const r=document.querySelector(".layout");if(!r||te!==null)return;const a=()=>{r!=null&&r.classList.contains("layout-wide")?(De(!1),t(!0),j({isEnablePageWidthMediumDisabled:!0,isEnablePageWidthMedium:!1})):(t(!1),j({isEnablePageWidthMediumDisabled:!1,isEnablePageWidthMedium:!1}))},o=s=>{for(const u of s)u.type==="attributes"&&u.attributeName==="class"&&a()};a(),te=new MutationObserver(o);const i={attributes:!0,attributeFilter:["class"]};te.observe(r,i)})};return l.useEffect(()=>{const r=G("isEnablePageWidthMedium");return r.subscribe(a=>{De(a)}),E(["isEnablePageWidthMedium"]).then(a=>{x(a==null?void 0:a.isEnablePageWidthMedium)&&De(a==null?void 0:a.isEnablePageWidthMedium)}),()=>{r.unsubscribe(),te=null}},[]),Cn(()=>{te=null,n()}),{isNotionPageWidthWorks:e}}const Kt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("enable-more-line-light"):t.classList.remove("enable-more-line-light"));const n=document.querySelectorAll(".notion-page-content");if(n.length===1){const r=n[0];e?r.style.lineHeight="1.7":r.style.lineHeight="1.4"}};function ku(){l.useEffect(()=>{E(["isEnableMoreLineHeight"]).then(e=>{x(e==null?void 0:e.isEnableMoreLineHeight)&&Kt(e==null?void 0:e.isEnableMoreLineHeight)}),G("isEnableMoreLineHeight").subscribe(e=>{Kt(e)})},[])}const Jt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("hide-table-view-icons-in-databse"):t.classList.remove("hide-table-view-icons-in-databse"))};function ju(){l.useEffect(()=>{const e=G("isHidePropertyIcon");return e.subscribe(t=>{Jt(t)}),E(["isHidePropertyIcon"]).then(t=>{x(t==null?void 0:t.isHidePropertyIcon)&&Jt(t==null?void 0:t.isHidePropertyIcon)}),()=>{e.unsubscribe()}},[])}const Xt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("beautify-scroll-bar"):t.classList.remove("beautify-scroll-bar"))};function Ru(){l.useEffect(()=>{const e=G("isBeautifyScrollBar");return e.subscribe(t=>{Xt(t)}),E(["isBeautifyScrollBar"]).then(t=>{x(t==null?void 0:t.isBeautifyScrollBar)&&Xt(t==null?void 0:t.isBeautifyScrollBar)}),()=>{e.unsubscribe()}},[])}const Yt=e=>{const t=document.querySelector(".notion-body");t&&(e?t.classList.add("words-count-ele"):t.classList.remove("words-count-ele"))};function Du(){const[e,t]=l.useState(!1);return l.useEffect(()=>{const n=G("showWordsCount");return n.subscribe(r=>{t(r),Yt(r)}),E(["showWordsCount"]).then(r=>{x(r==null?void 0:r.showWordsCount)&&(t(r==null?void 0:r.showWordsCount),Yt(r==null?void 0:r.showWordsCount))}),()=>{n.unsubscribe()}},[]),{showWordsCount:e}}function Bu(){const[e,t]=l.useState(!1),n=r=>{e&&r.code==="Space"&&(r.preventDefault(),document.execCommand("insertText",!1," "))};l.useEffect(()=>{const r=G("isDisableAIPopup");return r.subscribe(a=>{t(a)}),E(["isDisableAIPopup"]).then(a=>{x(a==null?void 0:a.isDisableAIPopup)&&t(a==null?void 0:a.isDisableAIPopup)}),e&&window.addEventListener("keydown",n),()=>{r.unsubscribe(),window.removeEventListener("keydown",n)}},[e])}function Wu(){const[e,t]=l.useState(!1);l.useEffect(()=>{const n=o=>{o.code==="Space"&&e&&window.dispatchEvent(new KeyboardEvent("keydown",{altKey:!1,code:"Escape",ctrlKey:!1,isComposing:!1,key:"Escape",location:0,metaKey:!1,repeat:!1,shiftKey:!1,which:27,charCode:0,keyCode:27}))},r=document.querySelector("#notion-app .notion-app-inner .whenContentEditable");return e&&W("#notion-app .notion-app-inner .whenContentEditable").then(()=>{r==null||r.addEventListener("keydown",n)}),G("isHideSlashMenuWhenPressSpacebar").subscribe(o=>{t(o)}),E(["isHideSlashMenuWhenPressSpacebar"]).then(o=>{x(o==null?void 0:o.isHideSlashMenuWhenPressSpacebar)&&t(o==null?void 0:o.isHideSlashMenuWhenPressSpacebar)}),()=>{r==null||r.removeEventListener("keydown",n)}},[e])}var wn="complete",Vt="canceled";function Fu(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}function Zt(e,t,n){e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function Uu(e,t){var n=e.align,r=e.target,a=r.getBoundingClientRect(),o,i,s,u,f,v,d,h=n&&n.left!=null?n.left:.5,S=n&&n.top!=null?n.top:.5,m=n&&n.leftOffset!=null?n.leftOffset:0,y=n&&n.topOffset!=null?n.topOffset:0,g=h,_=S;if(e.isWindow(t))v=Math.min(a.width,t.innerWidth),d=Math.min(a.height,t.innerHeight),i=a.left+t.pageXOffset-t.innerWidth*g+v*g,s=a.top+t.pageYOffset-t.innerHeight*_+d*_,i-=m,s-=y,i=e.align.lockX?t.pageXOffset:i,s=e.align.lockY?t.pageYOffset:s,u=i-t.pageXOffset,f=s-t.pageYOffset;else{v=a.width,d=a.height,o=t.getBoundingClientRect();var C=a.left-(o.left-t.scrollLeft),I=a.top-(o.top-t.scrollTop);i=C+v*g-t.clientWidth*g,s=I+d*_-t.clientHeight*_,i-=m,s-=y,i=Math.max(Math.min(i,t.scrollWidth-t.clientWidth),0),s=Math.max(Math.min(s,t.scrollHeight-t.clientHeight),0),i=e.align.lockX?t.scrollLeft:i,s=e.align.lockY?t.scrollTop:s,u=i-t.scrollLeft,f=s-t.scrollTop}return{x:i,y:s,differenceX:u,differenceY:f}}function Ee(e){var t=e._scrollSettings;if(t){var n=t.maxSynchronousAlignments,r=Uu(t,e),a=Date.now()-t.startTime,o=Math.min(1/t.time*a,1);if(t.endIterations>=n)return Zt(e,r.x,r.y),e._scrollSettings=null,t.end(wn);var i=1-t.ease(o);if(Zt(e,r.x-r.differenceX*i,r.y-r.differenceY*i),a>=t.time){t.endIterations++,t.scrollAncestor&&Ee(t.scrollAncestor),Ee(e);return}Fu(Ee.bind(null,e))}}function Gu(e){return e.self===e}function zu(e,t,n,r,a){var o=!t._scrollSettings,i=t._scrollSettings,s=Date.now(),u,f={passive:!0};i&&i.end(Vt);function v(h){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(h),n.debug,a(h),u&&(t.removeEventListener("touchstart",u,f),t.removeEventListener("wheel",u,f))}var d=n.maxSynchronousAlignments;return d==null&&(d=3),t._scrollSettings={startTime:s,endIterations:0,target:e,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||Gu,maxSynchronousAlignments:d,end:v,scrollAncestor:r},(!("cancellable"in n)||n.cancellable)&&(u=v.bind(null,Vt),t.addEventListener("touchstart",u,f),t.addEventListener("wheel",u,f)),o&&Ee(t),u}function Qt(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&getComputedStyle(e).overflow!=="hidden"}function Ku(){return!0}function Ve(e){if(e.assignedSlot)return Ve(e.assignedSlot);if(e.parentElement)return e.parentElement.tagName.toLowerCase()==="body"?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t.host}}const Ju=(e,t,n)=>{if(!e)return;typeof t=="function"&&(n=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(f){return 1-Math.pow(1-f,f/2)},t.align=t.align||{};var r=Ve(e),a=1;function o(f){a--,a||n&&n(f)}var i=t.validTarget||Ku,s=t.isScrollable;t.debug;for(var u=[];r;)if(t.debug,i(r,a)&&(s?s(r,Qt):Qt(r))&&(a++,u.push(r)),r=Ve(r),!r){o(wn);break}return u.reduce((f,v,d)=>zu(e,v,t,u[d+1],o),null)},Xu=new RegExp(`${re}`),Yu=new RegExp(`${ae}`),Vu=new RegExp(`${oe}`),Zu=e=>e.map(t=>{const n=t==null?void 0:t.getAttribute("data-block-id"),r=t.querySelector('[data-content-editable-leaf="true"]').textContent;let a;return Xu.test(t.className)?a=re:Yu.test(t.className)?a=ae:Vu.test(t.className)&&(a=oe),{level:a,text:r,hash:n}}),Qu="/assets/icon-collapse-b33b49ee.svg";const qt=chrome.runtime.getURL(xn),en=chrome.runtime.getURL(Qu);let Be=!1;const tn=0,nn=new RegExp(`${re}|${ae}|${oe}`);let _e,ne,Se=Ue,We=null;const qu=(e,t)=>{if(!e||!t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],a=t[n];if(!r||!a||r.level!==a.level||r.text!==a.text)return!1}return!0},ef=e=>{if(!e)return"";const t=Array.from(e.classList);let n="";return t.includes(re)?n=`${re}`:t.includes(ae)?n=`${ae}`:t.includes(oe)&&(n=`${oe}`),n};function tf(){Cu(),Au(),Lu(),Iu(),Pu(),xu(),Mu(),Nu(),ku(),ju(),Ru(),Bu(),Wu();const{showWordsCount:e}=Du(),{triggerUseHideHelpButton:t}=$u(),{triggerUseHideBreadCrumbs:n}=wu(),{triggerUseHideBackLinks:r}=Tu(),[a,o]=l.useState([]),[i,s]=l.useState([]),[u,f]=l.useState(tn),[v,d]=l.useState(0),[h,S]=l.useState(0),m=l.useRef(null),y=l.useRef(!1),g=l.useRef(!1),[_,C]=l.useState(!0),I=c=>{c&&(Be=!0,Ju(c,{align:{top:0}},()=>{Be=!1}))},M=c=>{var P,N;const H=(N=(P=c.target)==null?void 0:P.dataset)==null?void 0:N.blockid,L=document.querySelector(`.notion-page-content div[data-block-id="${H}"]`);L&&I(L)},$=()=>{var c;y.current=!1,(c=m.current)==null||c.classList.add("hide")},p=()=>{W(".notion-frame .whenContentEditable").then(()=>{We=document.querySelector(".whenContentEditable"),!g.current&&We&&(g.current=!0,A(),ne=new MutationObserver(()=>{A()}),ne.observe(We,{subtree:!0,childList:!0,characterData:!0}))})},w=()=>{var L,P,N,de;const c=document.querySelectorAll(".notion-page-content .notion-selectable");if(!c)return null;const H=Array.from(c).filter(k=>nn.test(k.className));for(let k=0;k<H.length;k++){const ot=H[k];if(lt(ot)){const it=ot.getAttribute("data-block-id")||"";if(Se!==Ue&&Se===it)break;Se=it;const xe=(L=m.current)==null?void 0:L.querySelector(".list-container");if(!xe)return;const K=xe.querySelectorAll(".link-item");let st=0;for(let B=0;B<k;B++){(P=K[B])==null||P.classList.remove("current");const Me=K[B];st+=(Me==null?void 0:Me.scrollHeight)||0}f(k),(N=K[k])==null||N.classList.add("current");for(let B=k+1;B<K.length;B++)(de=K[B])==null||de.classList.remove("current");!Nn(K[k])&&!Be&&(xe.scrollTop=st-100);break}}},O=()=>{var H,L,P;const c=document.querySelector(".notion-page-content");if(c&&e){const N=((H=c.textContent)==null?void 0:H.length)||0,de=((P=(L=c.textContent)==null?void 0:L.match(/\S+/g))==null?void 0:P.length)||0;d(de),S(N)}},{run:A}=Ft(()=>{const c=document.querySelectorAll(".notion-page-content .notion-selectable");if(O(),!c)return s([]),null;const H=Array.from(c).filter(P=>nn.test(P.className));if(H.length===0)return s([]),null;const L=Zu(H);if(qu(L,a))return null;o(JSON.parse(JSON.stringify(L))),s(H),w()},{wait:500}),[z,q]=l.useState(!1),nt=c=>{q(c),j({isTOCCollapse:c}),A(),w()},Tn=()=>{z&&z===!0&&nt(!1)},[On,ue]=l.useState(!1),An=()=>{const c=document.querySelector(".notion-frame .notion-page-controls");c&&!lt(c)&&I(c)},Pe=()=>{var c;ut(window.location.href)&&(y.current=!0,A(),(c=m.current)==null||c.classList.remove("hide"))},{run:rt}=Ft(()=>{w()},{wait:500}),fe=l.useRef(!1),at=()=>{fe.current||W(".notion-frame .notion-scroller").then(()=>{const c=document.querySelector(".notion-frame .notion-scroller");c&&(c==null||c.addEventListener("scroll",rt),fe.current=!0)})},Ln=()=>{Se=Ue,f(tn),ne==null||ne.disconnect(),_e==null||_e.disconnect(),_e=null,g.current=!1,fe.current=!1,d(0),S(0),setTimeout(()=>{p(),A()},0),y.current?Pe():$(),at(),W("#notion-app .notion-frame .notion-page-details-controls").then(()=>{document.querySelector("#notion-app .notion-frame .notion-page-details-controls")&&r()})};return Cn(()=>{ut(window.location.href)?C(!0):C(!1),Ln()}),l.useEffect(()=>{e&&O()},[e]),l.useEffect(()=>(p(),E(["renderWay","isTOCCollapse","isScrollToTopChecked"]).then(c=>{(c==null?void 0:c.renderWay)===!0?Pe():(c==null?void 0:c.renderWay)===!1&&$(),(c==null?void 0:c.isScrollToTopChecked)===!0?ue(!0):(c==null?void 0:c.isScrollToTopChecked)===!1&&ue(!1),(c==null?void 0:c.isTOCCollapse)===!0?q(!0):q(!1)}),chrome.runtime.onMessage.addListener(function(c,H,L){c.renderWay===!0?Pe():c.renderWay===!1&&$(),c.isScrollToTopChecked===!0?ue(!0):c.isScrollToTopChecked===!1&&ue(!1),L("Have received your message from content script："+JSON.stringify(c))}),W("#notion-app .notion-app-inner").then(()=>{const c=document.querySelector("#notion-app .notion-app-inner");c&&(j({fontfamilyOld:c.style.fontFamily}),En(),$e())}),W("#notion-app .notion-help-button").then(()=>{document.querySelector("#notion-app .notion-help-button")&&t()}),W("#notion-app .notion-topbar .shadow-cursor-breadcrumb").then(()=>{document.querySelector("#notion-app .notion-topbar .shadow-cursor-breadcrumb")&&n()}),at(),()=>{const c=document.querySelector(".notion-frame .notion-scroller");c==null||c.removeEventListener("scroll",rt),fe.current=!1}),[]),U(rn,{children:[U("div",{className:ct(Wn,y.current&&_?" ":"hide",z?"COLLAPSE":""),ref:m,children:[U("div",{className:"toc-header mr-0 p-[10px] flex justify-between items-center",children:[U("div",{className:"flex items-center",children:[T("div",{className:"header-icon",style:{backgroundImage:`url(${qt})`}}),T(Mn,{as:"h6",size:"xs",marginLeft:1,children:"Notion Power"})]}),T("span",{role:"button",tabIndex:0,"aria-label":"collapse toc",className:"cursor-pointer icon-collapse",style:{maskImage:`url(${en})`},onClick:()=>nt(!0)})]}),T("div",{className:"list-container pt-2",onClick:M,role:"button",tabIndex:0,children:i.length?i.map((c,H)=>{var N;const L=c==null?void 0:c.getAttribute("data-block-id"),P=c==null?void 0:c.getElementsByClassName("notranslate");return T("div",{className:`link-item ${u===H?"current":""}`,"data-blockid":L,children:T("button",{className:`link ${ef(c)}`,rel:"noopener noreferrer","data-blockid":L,children:(N=P[0])==null?void 0:N.textContent})},H)}):T("div",{className:"flex h-full w-full justify-center items-center"})}),T("div",{className:ct("collapsed-icon",z?"":"hide"),"aria-label":"collapsed toc",role:"button",tabIndex:0,onClick:Tn,style:{backgroundImage:`url(${qt})`}})]}),T("div",{className:`${Fn} ${On&&_?"show":""}`,onClick:An,role:"button",tabIndex:0,"aria-label":"scroll-to-top button",children:T("div",{className:"icon-scroll-to-top",style:{maskImage:`url(${en})`}})}),U("div",{className:"words-count  text-slate-500 text-sm oveflow-hidden text-nowrap truncate ...",children:[v," words ",h," characters"]})]})}function nf(){const[e,t]=l.useState("testlicense");return T("div",{style:{height:"100%",width:"100%"},children:e===""?T(rn,{children:T(Gn,{})}):T(tf,{})})}if(window.self===window.top){const e="DOM_CONTAINER_CLASS_NOTION_WRAPPER";let t=document.querySelector(`.${e}`);t||(t=document.createElement("div"),t.classList.add(`${e}`)),document.body.appendChild(t),kn.createRoot(t).render(U(jn.StrictMode,{children:[T(Rn,{children:T(nf,{})}),","]}))}
